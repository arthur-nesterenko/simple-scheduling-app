(this["webpackJsonpsimple-scheduling-app"]=this["webpackJsonpsimple-scheduling-app"]||[]).push([[0],{151:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),i=(n(95),n(12)),l=n(11),s=n.n(l),u=n(80),m=Object(u.extendMoment)(s.a),f=function(e){return m(e,"HH:mm")},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hour",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"22:00",o=f(e),c=f(e),i=f(t),l=f(r);i.isBefore(c)&&i.add(1,"day");for(var s=[];c<=i;){c.isSame(o)||c.subtract(n,a);var u=new m(c).format("HH:mm"),d=c.add(n,a);if(d.isAfter(l))break;s.push({start:u,end:d.format("HH:mm")}),c.add(n,a)}return s},v=function(e){var t=e.start,n=e.end,a=f(t),r=f(n);return m.range(a,r)},b=function(e){var t=(e=m(e,"HH:mm")).minute()>=30;return+e.minute(t?60:0).second(0).format("H")},g=n(35),p=function(e,t,n){var a=r.a.useState((function(){try{var a=sessionStorage.getItem(e);return"string"!==typeof a?(sessionStorage.setItem(e,n?String(t):JSON.stringify(t)),t):n?a:JSON.parse(a||"null")}catch(r){return t}})),o=Object(i.a)(a,2),c=o[0],l=o[1];return r.a.useEffect((function(){try{var t=n?String(c):JSON.stringify(c);sessionStorage.setItem(e,t)}catch(a){}})),[c,l]},h=r.a.createContext({}),E=function(e){var t=e.children,n=p("users",[],!1),a=Object(i.a)(n,2),o=a[0],c=a[1],l=r.a.useState((function(){return o})),s=Object(i.a)(l,2),u=s[0],m=s[1],f=r.a.useCallback((function(e,t){m((function(n){return[].concat(Object(g.a)(n),[{email:e.toLowerCase(),slot:t}])}))}),[]),d=r.a.useCallback((function(e){return new Set(u.map((function(e){return e.email}))).has(e)}),[u]);r.a.useEffect((function(){c(u)}),[c,u]);var v=r.a.useMemo((function(){return{addUser:f,hasEmail:d,users:u}}),[f,d,u]);return r.a.createElement(h.Provider,{value:v},t)},O=function(){var e=r.a.useContext(h);if(void 0===e)throw new Error("useBookingProvider must be used within a BookingProvider");return e},y=n(1),S=n.n(y),k=n(159),j=n(162),C=n(161),w=n(157),H=function(e){var t=r.a.useState(e),n=Object(i.a)(t,2),a=n[0],o=n[1];return[a,r.a.useCallback((function(){return o((function(e){return!e}))}),[])]},N=n(81),x=n(160),P=n(155),A=n(156),B=n(22),M=n(152),D=n(153),I=n(154),J=n(163);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var F=function(e){var t=e.onSubmit,n=O().hasEmail,a=r.a.useState(null),o=Object(i.a)(a,2),c=o[0],l=o[1],s=r.a.useCallback((function(e){e.preventDefault(),t(c)}),[n,t,c]),u=c&&n(c.email),m=r.a.useCallback((function(e){var t=e.target;l((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(B.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(B.a)({},t.name,t.value))}))}),[]);return r.a.createElement(M.a,{onSubmit:s},r.a.createElement(D.a,null,r.a.createElement(I.a,{type:"email",name:"email",onChange:m,invalid:u,valid:c?!n(c.email):void 0,placeholder:"Please enter your email"}),r.a.createElement(J.a,{addonType:"append"},r.a.createElement(N.a,{disabled:u,color:"secondary"},"Confirm"))))},U=function(){var e=O().users,t=e.map((function(e){return e.slot})).map(v),n=function(t){return new Set(e.map((function(e){var t=e.slot;return JSON.stringify(t)}))).has(JSON.stringify(t))},a=function(e){var n=v(e);return t.some((function(e){return e.contains(n)}))},o=function(e,n){return a(e)?e:d(n.start,n.end,30,"minutes").find((function(e){var n=v(e);return!1===t.some((function(e){return n.intersect(e)}))}))};return r.a.useMemo((function(){return{bookedSlots:t,checkIsAvailableSlot:a,getFirstAvailableSlots:o,isBooked:n}}),[t])},V=function(e){var t=e.onClick,n=e.isOpen,a=e.slot,o=e.onConfirmBooking,c=U().checkIsAvailableSlot,i=r.a.useCallback((function(e){o(e),t()}),[t,o]),l=c(a);return r.a.createElement("div",null,r.a.createElement(N.a,{color:"primary",disabled:l,onClick:t},"Book"),r.a.createElement(x.a,{isOpen:n,toggle:t},r.a.createElement(P.a,{toggle:t},"Slot ",a.start," - ",a.end),r.a.createElement(A.a,null,r.a.createElement(F,{onSubmit:i}))))},W=n(158),z=n(82),L=n.n(z),$=function(e){var t=e.onChange,n=e.activeSlot,a=e.currentSlot,o=U().checkIsAvailableSlot,c=r.a.useCallback((function(){t(a)}),[a]),i=o(a);return r.a.createElement(w.a,{className:"d-flex justify-content-between align-items-center",active:L()(n,a),disabled:i,onClick:c},r.a.createElement(W.a,{color:i?"secondary":"primary"},a.start),r.a.createElement("span",null,"-"),r.a.createElement(W.a,{color:i?"secondary":"primary"},a.end))},q=n(62),G=(n(148),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.from(e.by("hour",{excludeEnd:t}),(function(e){return+e.format("HH")}))}),K=function(e){return function(t){var n=s()(t,"HH");return Math.abs(f(e).diff(n,"minutes",!0))<=60?[30,0]:[]}},Q={showSecond:!1,minuteStep:30,format:"HH:mm",allowEmpty:!1,hideDisabledOptions:!0},R=r.a.memo((function(e){var t=e.start,n=e.end,a=e.min,o=e.max,c=e.onChange,i=U().bookedSlots,l=function(e){return function(a){c(Object(B.a)({start:t,end:n},e,a.format("HH:mm")))}},u=function(e){return function(){var r=function(e,t){var n=d(e.start,e.end,30,"minutes").filter((function(e){var n=v(e);return t.some((function(e){return n.intersect(e)}))})).map(v).reduce((function(e,t){return[].concat(Object(g.a)(e),[Array.from(t.by("hour"),b)])}),[]).flat();return Object(g.a)(new Set(n))}({start:a,end:o},i),c=G(v({start:s()().startOf("day"),end:a}),!0),l=G(v({start:o,end:s()().endOf("day")})).slice(1);return r.push(+f("start"===e?n:t).format("H")),r.concat(c,l)}};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(q.a,Object.assign({onChange:l("start"),defaultValue:f(t)},Q,{value:f(t),disabledHours:u("start"),disabledMinutes:K(n)}))),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(q.a,Object.assign({onChange:l("end"),value:f(n),defaultValue:f(n)},Q,{disabledHours:u("end"),disabledMinutes:K(n)}))))})),X=(S.a.oneOfType([S.a.string,S.a.instanceOf(Date)]),S.a.oneOfType([S.a.string,S.a.instanceOf(Date)]),S.a.func,r.a.memo((function(e){var t=e.start,n=e.end,a=e.onChange,o=U(),c=o.getFirstAvailableSlots,l=o.isBooked,s=o.bookedSlots,u=r.a.useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hours";return new m(e,"HH:mm").add(t,n).format("HH:mm")}(t)}),[t]),f=function(){return c({start:t,end:n},{start:t,end:u})},v=r.a.useState(f),b=Object(i.a)(v,2),g=b[0],p=b[1],h=H(!1),E=Object(i.a)(h,2),y=E[0],S=E[1],N=H(!1),x=Object(i.a)(N,2),P=x[0],A=x[1],B=O().addUser,M=r.a.useMemo((function(){return d(t,u,30,"minutes")}),[u,t]),D=g&&g.start!==t,I="undefined"!==typeof g,J=function(e){p(e),a(e)};return r.a.useEffect((function(){g&&l(g)&&p((function(){return f()}))}),[s,g]),r.a.createElement("div",{className:"flex-column align-items-center"},r.a.createElement(k.a,{size:"lg",disabled:!I,active:D,isOpen:y,toggle:S},r.a.createElement(j.a,{caret:!0,className:D?"alert-primary col-sm-12":"col-sm-12"},!I&&r.a.createElement("span",null,"Not Available slots"),I&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,g.start)," - ",r.a.createElement("span",null,g.end))),r.a.createElement(C.a,{className:"col-sm-12"},r.a.createElement(w.a,{header:!0,className:"text-center"},"Available slots"),M.map((function(e,t){return r.a.createElement($,{key:t,currentSlot:e,activeSlot:g,onChange:J})})))),I&&r.a.createElement("div",{className:"mt-2 flex-column justify-content-center"},r.a.createElement("small",{className:"d-inline-block my-2"},"Custom time slot"),r.a.createElement(R,Object.assign({},g,{min:t,max:u,onChange:J}))),r.a.createElement("div",{className:"my-3 text-center"},!l(g)&&I&&r.a.createElement(V,{slot:g,onClick:A,isOpen:P,onConfirmBooking:function(e){var t=e.email;B(t,g)}})))}))),Y=r.a.memo((function(e){var t=e.items,n=e.onChange,a=e.activeSlot;return r.a.createElement("div",{className:"row"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-sm-12 col-md-4 my-1"},r.a.createElement(X,Object.assign({key:t},e,{onChange:n,activeSlot:a})))})))}));var Z=function(){var e=r.a.useState(null),t=Object(i.a)(e,2),n=t[0],a=t[1],o=r.a.useMemo((function(){return d("07:00","22:00",3)}),[]);return r.a.createElement(E,null,r.a.createElement("div",{className:"container mt-5"},r.a.createElement("h1",null,"Time Slots"),r.a.createElement(Y,{onChange:a,activeSlot:n,items:o})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,n){e.exports=n(151)}},[[90,1,2]]]);
//# sourceMappingURL=main.e9adc34b.chunk.js.map